<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PDF Uploader & Summarizer</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
  <div class="container">
    <h2>Upload a PDF and a note ({{ hostname }})</h2>

    <form method="post" enctype="multipart/form-data">
      <label for="pdf">ğŸ“„ PDF File:</label><br>
      <input type="file" name="pdf" id="pdf" accept=".pdf" required><br><br>
      <input type="submit" value="Upload & Summarize">
    </form>

    {% if message %}
      <p><strong>{{ message }}</strong></p>
    {% endif %}

    {% if summary %}
    <div class="summary">
      <h3>ğŸ§  PDF Summary</h3>
      <p>{{ summary }}</p>
    </div>
    {% endif %}

    <h3>ğŸ“ Uploaded PDFs</h3>
    <div>
        {% for file in pdfs %}
          <div class="pdf-card">
            <a href="/download/{{ file.filename }}">{{ file.filename }}</a>
            <form action="/delete/{{ file.filename }}" method="post" style="display:inline;">
              <button type="submit" onclick="return confirm('Delete this PDF?')">ğŸ—‘ï¸ Delete</button>
            </form>
      
            <div class="pdf-summary-snippet">
              <strong>ğŸ“„ Summary:</strong><br>
              {% if file.summary and file.summary != "âŒ No summary available" %}
                {{ file.summary.split()[:5] | join(" ") }}...
              {% else %}
                <span class="no-summary">âŒ No summary available</span>
              {% endif %}
            </div>
          </div>
        {% endfor %}
    </div>      
  </div>
</body>
</html>
